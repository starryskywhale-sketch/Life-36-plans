<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life 36 | 36å€‹10å¤©ï¼Œè®“æ¯ä¸€å€‹10å¤©éƒ½æ˜¯å…¨æ–°çš„é–‹å§‹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --bg-deep: #F0F2F5; --success-green: #C8E6C9; --accent: #4CAF50; --m-yellow: #FFF9C4; --base-font-size: 100%; }
        body { background-color: var(--bg-deep); color: #37474F; font-family: sans-serif; overflow-x: hidden; }
        .active-tab { color: var(--accent); font-weight: bold; position: relative; }
        .active-tab::after { content: ''; position: absolute; bottom: -8px; left: 50%; transform: translateX(-50%); width: 6px; height: 6px; background: var(--accent); border-radius: 50%; }

        .hidden { display: none; }
        .card { background: #FFFFFF; border-radius: 2rem; box-shadow: 0 10px 30px rgba(0,0,0,0.06); border: 1px solid rgba(255,255,255,0.5); }
        .board-viewport { width: 100vw; margin-left: calc(-50vw + 50%); overflow-x: auto; scroll-snap-type: x mandatory; scroll-behavior: smooth; -ms-overflow-style: none; scrollbar-width: none; display: flex; align-items: center; }
        .board-viewport::-webkit-scrollbar { display: none; }
        .board-track { display: inline-flex; padding: 40px calc(50vw - 155px); }
        .board-card { scroll-snap-align: center; min-width: 280px; width: 280px; margin: 0 15px; transition: transform 0.3s; }
        .today-highlight { background-color: var(--m-yellow) !important; border: 2px solid #FBC02D !important; }
        .board-item-done { background-color: var(--success-green) !important; color: #2E7D32 !important; font-weight: bold; position: relative; }
        .board-item-done::after { content: 'âœ“'; position: absolute; right: 8px; }
		.nav-arrow { position: fixed; top: 55%; /* ç¨å¾®ä¸‹ç§»ï¼Œé¿é–‹æ¨™é¡Œå€ */ transform: translateY(-50%); background: white; width: 48px; height: 48px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 20px rgba(0,0,0,0.15); z-index: 100; cursor: pointer; border: 1px solid rgba(0,0,0,0.05); color: #90A4AE; transition: all 0.2s; }
        .nav-arrow:active { scale: 0.9; }
        .arrow-left { left: 10px; }  /* å¼·åˆ¶å›ºå®šåœ¨å·¦å´ */
        .arrow-right { right: 10px; } /* å¼·åˆ¶å›ºå®šåœ¨å³å´ */
        /* ç¢ºä¿åœ¨å°è¢å¹•ä¸ŠæŒ‰éˆ•ä¸æœƒå¤ªçªå…€ */
        @media (min-width: 768px) {
            .arrow-left { left: 40px; }
            .arrow-right { right: 40px; }
        }
        .copyright-mini { font-size: 10px; color: #90A4AE; text-align: center; margin-top: 30px; }
		html { font-size: var(--base-font-size); }
		/* æŒ‰éˆ•é»é¸å¾Œçš„æ¨£å¼ */
		.font-btn-active {
			background-color: var(--accent) !important;
			color: white !important;
			border-color: var(--accent) !important;
		}
    </style>
</head>
<body class="p-4 md:p-8 pb-40">

    <div class="max-w-4xl mx-auto">
        <div class="flex justify-between items-start mb-10 px-4">
            <div>
                <h1 class="text-xl font-light tracking-[0.4em] text-slate-400">LIFE 36</h1>
                <p class="text-[10px] text-slate-400/70 tracking-[0.2em] font-medium mt-2">æ¯ä¸€å€‹ 10 å¤©éƒ½æ˜¯ä¸€æ¬¡å…¨æ–°çš„äººç”Ÿé–‹å§‹</p>
            </div>
            <div class="flex flex-col items-end max-w-[180px]">
                <div class="flex gap-2 mb-3">
                    <button onclick="exportData()" class="text-[10px] bg-white px-3 py-1.5 rounded-full shadow-sm text-slate-500 font-bold hover:bg-slate-50">ğŸ’¾ å‚™ä»½</button>
                    <button onclick="importData()" class="text-[10px] bg-white px-3 py-1.5 rounded-full shadow-sm text-slate-500 font-bold hover:bg-slate-50">ğŸ“‚ æ¢å¾©</button>
                </div>
                <p class="text-[9px] text-amber-500/80 font-medium text-right leading-relaxed">âš ï¸ æš«å­˜æ–¼ç€è¦½å™¨ï¼Œè«‹éš¨æ™‚å‚™ä»½ã€‚</p>
            </div>
        </div>

        <section id="page-daily">
            <div class="max-w-md mx-auto card p-10">
                <div id="group-label" class="mb-4 text-center text-[10px] font-black text-green-600 tracking-widest uppercase">UNIT</div>
                <div class="flex justify-between items-center mb-6">
                    <button onclick="changeDate(-1)" class="text-slate-200 hover:text-slate-500 text-2xl">â®</button>
                    <div class="text-center">
                        <div id="display-date" class="text-2xl font-bold text-slate-700"></div>
                        <div id="range-hint" class="text-[10px] text-slate-400 mt-2 font-mono uppercase"></div>
                    </div>
                    <button onclick="changeDate(1)" class="text-slate-200 hover:text-slate-500 text-2xl">â¯</button>
                </div>

                <div class="mb-6 bg-slate-50 p-4 rounded-3xl text-center">
                    <label class="block text-[8px] text-slate-300 mb-1 uppercase tracking-tighter font-bold">Today's Mood</label>
                    <select id="mood-select" onchange="saveMeta()" class="bg-transparent text-2xl outline-none cursor-pointer">
                        <option value="âœ¨">âœ¨ å¹³éœ</option><option value="ğŸ˜Š">ğŸ˜Š å–œæ‚…</option>
                        <option value="ğŸŒ¿">ğŸŒ¿ èˆ’çˆ½</option><option value="â˜ï¸">â˜ï¸ ç·©æ…¢</option>
                        <option value="ğŸŒ™">ğŸŒ™ æ²‰æ€</option><option value="âš¡">âš¡ èƒ½é‡</option>
                    </select>
                </div>

                <div id="quick-pick-area" class="flex flex-wrap gap-2 mb-8 justify-center"></div>

                <div id="task-list" class="space-y-3"></div>
                <button onclick="addTask()" class="w-full mt-10 py-4 text-slate-300 text-sm font-bold border-2 border-dashed border-slate-100 rounded-[2rem] hover:border-slate-300 transition-all">+ æ–°å¢ä»Šæ—¥è¡Œå‹•</button>
            </div>
			<p><br><br><br></p>     
		</section>

        <section id="page-board" class="hidden relative">
            <div class="flex justify-center items-center gap-4 mb-6">
                <span class="text-[10px] font-black text-slate-400 tracking-widest uppercase">Review Unit</span>
                <select id="board-unit-select" onchange="renderBoard(parseInt(this.value))" class="bg-white px-4 py-2 rounded-full shadow-sm text-xs font-bold text-slate-600 outline-none border border-slate-100 cursor-pointer"></select>
            </div>
            <div class="relative">
                <button onclick="scrollBoard(-1)" class="nav-arrow arrow-left">â®</button>
                <div id="board-viewport" class="board-viewport"><div id="board-track" class="board-track"></div></div>
                <button onclick="scrollBoard(1)" class="nav-arrow arrow-right">â¯</button>
            </div>
			<p><br><br><br></p>
        </section>
    
		<section id="page-yearly" class="hidden">
            <div id="grid-container" class="grid grid-cols-2 sm:grid-cols-3 gap-6"></div>
			<p><br><br><br></p>
        </section>

     <section id="page-manage" class="hidden">
			<div class="mt-8 p-6 bg-slate-50 rounded-[2rem] border border-slate-100 shadow-inner">
				<h3 class="text-center font-bold text-slate-400 mb-4 tracking-widest uppercase text-[10px]">ä»‹é¢é¡¯ç¤ºè¨­å®š</h3>
				<div class="flex justify-between gap-2">
					<button id="font-90" onclick="changeFontSize('90%')" class="flex-1 py-3 bg-white border border-slate-200 rounded-2xl text-xs text-slate-500 transition-all hover:shadow-sm">ç²¾ç·»</button>
					<button id="font-100" onclick="changeFontSize('100%')" class="flex-1 py-3 bg-white border border-slate-200 rounded-2xl text-xs text-slate-500 transition-all hover:shadow-sm">æ¨™æº–</button>
					<button id="font-120" onclick="changeFontSize('120%')" class="flex-1 py-3 bg-white border border-slate-200 rounded-2xl text-xs text-slate-500 transition-all hover:shadow-sm font-bold">æ”¾å¤§</button>
				</div>
				<p class="text-[9px] text-slate-300 text-center mt-3 tracking-tighter">èª¿æ•´å¾Œå°‡å¥—ç”¨è‡³å…¨ç«™ä¸¦è‡ªå‹•å„²å­˜</p>
			</div>
		 	<p><br></p>
            <div class="max-w-md mx-auto card p-10">
                <h2 class="text-center font-bold text-slate-600 mb-6 tracking-widest uppercase text-xs">â€” å¸¸ç”¨è¡Œå‹•ç®¡ç† â€”</h2>
                <div class="space-y-3 mb-8">
                    <div class="flex gap-2">
                        <input type="text" id="new-common-input" placeholder="ä¾‹ï¼šå†¥æƒ³ 10 åˆ†é˜" class="flex-1 bg-slate-50 rounded-xl px-4 py-2 text-sm outline-none">
                        <button onclick="addCommonItem()" class="bg-green-500 text-white px-4 py-2 rounded-xl text-sm font-bold">æ–°å¢</button>
                    </div>
                    <div id="common-management-list" class="space-y-2"></div>
                </div>
                <p class="text-center text-[10px] text-slate-300 italic">åœ¨æ­¤ç·¨è¼¯çš„é …ç›®æœƒå‡ºç¾åœ¨ Daily é é¢çš„å¿«æ·å€</p>
            </div>
		 <p><br><br><br></p>
        </section>

        <section id="page-about" class="hidden">
            <div class="max-w-md mx-auto card p-10 text-center">
                <h2 class="text-lg font-bold text-slate-600 mb-6 tracking-widest">é—œæ–¼ç³»çµ±</h2>
                <div class="mb-10 p-8 bg-stone-50 rounded-[2.5rem] border border-stone-100 text-left shadow-inner">
                    <h3 class="text-xs font-black text-stone-400 mb-4 tracking-[0.2em] uppercase text-center">â€” æ ¸å¿ƒè¨­è¨ˆç†å¿µ â€”</h3>
                    <div class="text-slate-600 leading-relaxed space-y-4 text-sm tracking-wide">
                        <p class="font-medium">æœ¬ç¶²é ä»¥ã€Œ36çµ„10å¤©è¨ˆç•«ã€ç‚ºæ¦‚å¿µè£½ä½œè€Œæˆã€‚</p>
						<p></p>
                        ä¸€å¹´365å¤©å¤ªé•·ï¼Œä¸€é€±7å¤©åˆå¤ªåƒä¸Šç­æ‰“å¡ã€‚<br>
                        ä½†æ‹†æˆ10å¤©â€¦â€¦ä½ æœ‰36æ¬¡é‡æ–°é–‹å§‹ç´¯ç©ç¶“é©—å€¼çš„æ©Ÿæœƒã€‚<br>
                        <p>æœ‰å®Œæˆï¼Œå¾ˆæ£’ï¼›æ²’åšåˆ°ï¼Œä¹Ÿä¸è¦ç·Šã€‚</p>
                       ä¸€å¤©å¤©ç´¯ç©ä¸‹ä¾†ï¼Œä¹Ÿèƒ½é€æ¼¸æˆç‚ºæ›´æ£’çš„ä½ ï¼<br>
                    </div>
                </div>
                <div class="space-y-6 text-sm text-slate-500">
                    <p>ç”± <span class="text-slate-800 font-bold">æ˜Ÿç«å¤ªå¤ª</span> æ§‹æ€å®šç¾©</p>
                    <p><span class="text-slate-800 font-bold">GEMINI AI</span> å”ä½œé–‹ç™¼</p>
                </div>
            </div>
			<p><br><br><br></p>
        </section>

        <nav class="fixed bottom-8 left-1/2 -translate-x-1/2 bg-white/90 backdrop-blur-md shadow-2xl px-6 py-5 rounded-full flex gap-6 md:gap-10 z-50">
            <button onclick="showPage('daily')" id="nav-daily" class="active-tab text-[10px] font-bold uppercase tracking-widest">Daily</button>
            <button onclick="showPage('board')" id="nav-board" class="text-slate-400 text-[10px] font-bold uppercase tracking-widest">Board</button>
            <button onclick="showPage('yearly')" id="nav-yearly" class="text-slate-400 text-[10px] font-bold uppercase tracking-widest">Yearly</button>
            <button onclick="showPage('manage')" id="nav-manage" class="text-slate-400 text-[10px] font-bold uppercase tracking-widest">Manage</button>
            <button onclick="showPage('about')" id="nav-about" class="text-slate-400 text-[10px] font-bold uppercase tracking-widest">About</button>
        </nav>
    </div>

    <script>
        const plan = [{id:1, s:"01-01", e:"01-10"}, {id:2, s:"01-11", e:"01-20"}, {id:3, s:"01-21", e:"01-30"}, {id:4, s:"02-01", e:"02-10"}, {id:5, s:"02-11", e:"02-20"}, {id:6, s:"02-21", e:"03-02"}, {id:7, s:"03-03", e:"03-12"}, {id:8, s:"03-13", e:"03-22"}, {id:9, s:"03-23", e:"04-01"}, {id:10, s:"04-02", e:"04-11"}, {id:11, s:"04-12", e:"04-21"}, {id:12, s:"04-22", e:"05-01"}, {id:13, s:"05-02", e:"05-11"}, {id:14, s:"05-12", e:"05-21"}, {id:15, s:"05-22", e:"05-31"}, {id:16, s:"06-01", e:"06-10"}, {id:17, s:"06-11", e:"06-20"}, {id:18, s:"06-21", e:"06-30"}, {id:19, s:"07-01", e:"07-10"}, {id:20, s:"07-11", e:"07-20"}, {id:21, s:"07-21", e:"07-30"}, {id:22, s:"07-31", e:"08-09"}, {id:23, s:"08-10", e:"08-19"}, {id:24, s:"08-20", e:"08-29"}, {id:25, s:"08-30", e:"09-08"}, {id:26, s:"09-09", e:"09-18"}, {id:27, s:"09-19", e:"09-28"}, {id:28, s:"09-29", e:"10-08"}, {id:29, s:"10-09", e:"10-18"}, {id:30, s:"10-19", e:"10-28"}, {id:31, s:"10-29", e:"11-07"}, {id:32, s:"11-08", e:"11-17"}, {id:33, s:"11-18", e:"11-27"}, {id:34, s:"11-28", e:"12-07"}, {id:35, s:"12-08", e:"12-17"}, {id:36, s:"12-18", e:"12-27"}];
        let viewerDate = new Date();

        function showPage(page) {
            ['daily', 'board', 'yearly', 'manage', 'about'].forEach(p => {
                document.getElementById('page-'+p).classList.add('hidden');
                document.getElementById('nav-'+p).className = 'text-slate-400 text-[10px] font-bold uppercase tracking-widest';
            });
            document.getElementById('page-'+page).classList.remove('hidden');
            document.getElementById('nav-'+page).className = 'active-tab text-[10px] font-bold uppercase tracking-widest';
            if(page === 'yearly') renderYearly();
            if(page === 'manage') renderManagementList();
            if(page === 'board') { initBoardSelect(); const cur = getInfo(new Date()).id; document.getElementById('board-unit-select').value = cur; renderBoard(parseInt(cur)); }
            if(page === 'daily') updateDaily();
        }

        // --- å¸¸ç”¨ç®¡ç†é‚è¼¯ ---
        function getCommonItems() { return JSON.parse(localStorage.getItem('common-tasks-36') || '["ğŸ§˜ å†¥æƒ³", "ğŸ’§ å–æ°´", "ğŸ“– é–±è®€"]'); }
        function saveCommonItems(items) { localStorage.setItem('common-tasks-36', JSON.stringify(items)); }
        function addCommonItem() {
            const val = document.getElementById('new-common-input').value.trim();
            if(!val) return;
            const items = getCommonItems(); items.push(val);
            saveCommonItems(items); document.getElementById('new-common-input').value = '';
            renderManagementList();
        }
        function renderManagementList() {
            const list = document.getElementById('common-management-list'); list.innerHTML = '';
            getCommonItems().forEach((item, idx) => {
                const div = document.createElement('div');
                div.className = "flex justify-between items-center bg-slate-50 p-3 rounded-xl text-sm font-bold text-slate-600";
                div.innerHTML = `<span>${item}</span><button onclick="removeCommonItem(${idx})" class="text-red-300 hover:text-red-500">âœ•</button>`;
                list.appendChild(div);
            });
        }
        function removeCommonItem(idx) { const items = getCommonItems(); items.splice(idx, 1); saveCommonItems(items); renderManagementList(); }

        // --- æ ¸å¿ƒæ¸²æŸ“ ---
        function updateDaily() {
            const dateStr = viewerDate.toISOString().split('T')[0];
            document.getElementById('display-date').innerText = dateStr;
            const info = getInfo(viewerDate);
            document.getElementById('group-label').innerText = `UNIT ${info.id}`;
            document.getElementById('range-hint').innerText = `${info.s} ~ ${info.e}`;
            
            const qpArea = document.getElementById('quick-pick-area'); qpArea.innerHTML = '';
            getCommonItems().forEach(item => {
                const btn = document.createElement('button');
                btn.className = "text-[10px] px-3 py-1 bg-white border border-slate-100 rounded-full text-slate-400 hover:bg-green-50 shadow-sm transition-colors";
                btn.innerText = item;
                btn.onclick = () => { addTask(item); saveTasks(); };
                qpArea.appendChild(btn);
            });

            const list = document.getElementById('task-list'); list.innerHTML = '';
            const saved = JSON.parse(localStorage.getItem('tasks-' + dateStr) || '[]');
            saved.forEach(t => addTask(t.txt, t.done));
            const meta = JSON.parse(localStorage.getItem('meta-' + dateStr) || '{"mood":"âœ¨"}');
            document.getElementById('mood-select').value = meta.mood;
        }

        function addTask(txt = '', done = false) {
            const container = document.getElementById('task-list');
            const row = document.createElement('div');
            row.className = `flex items-center gap-4 p-4 rounded-2xl bg-white border border-slate-50 shadow-sm`;
            row.innerHTML = `<input type="checkbox" ${done ? 'checked' : ''} onchange="saveTasks(); updateRowStyle(this)" class="w-6 h-6 accent-green-600 cursor-pointer"><input type="text" value="${txt}" onblur="saveTasks()" placeholder="..." class="flex-1 text-sm outline-none bg-transparent font-bold ${done ? 'text-green-700' : 'text-slate-600'}"><button onclick="this.parentElement.remove(); saveTasks()" class="text-slate-200 hover:text-red-400 text-xs">âœ•</button>`;
            container.appendChild(row);
            if(done) updateRowStyle(row.querySelector('input[type="checkbox"]'));
        }

        function saveTasks() {
            const dateStr = viewerDate.toISOString().split('T')[0];
            const data = Array.from(document.querySelectorAll('#task-list > div')).map(r => ({
                txt: r.querySelector('input[type="text"]').value,
                done: r.querySelector('input[type="checkbox"]').checked
            })).filter(i => i.txt.trim() !== '');
            localStorage.setItem('tasks-' + dateStr, JSON.stringify(data));
        }

        function updateRowStyle(el) { const r = el.parentElement; const i = r.querySelector('input[type="text"]'); if(el.checked){ r.classList.add('bg-green-50'); i.classList.add('text-green-700'); } else { r.classList.remove('bg-green-50'); i.classList.remove('text-green-700'); } }
        function getInfo(date) {
            const m = date.getMonth()+1; const d = date.getDate(); const mmdd = (m<10?'0'+m:m)+'-'+(d<10?'0'+d:d);
            if(mmdd === '02-29') return {id: 'âš¡', s: '02-29', e: '02-29'};
            if(mmdd >= '12-28') return {id: 'ğŸ§˜', s: '12-28', e: '12-31'};
            return plan.find(p => mmdd >= p.s && mmdd <= p.e) || {id: '?', s:'', e:''};
        }
        function saveMeta() { localStorage.setItem('meta-' + viewerDate.toISOString().split('T')[0], JSON.stringify({ mood: document.getElementById('mood-select').value })); }
        function changeDate(n) { viewerDate.setDate(viewerDate.getDate() + n); updateDaily(); }
        function initBoardSelect() { const sel = document.getElementById('board-unit-select'); if(sel.options.length>0) return; plan.forEach(u => { const opt = document.createElement('option'); opt.value = u.id; opt.innerText = `Unit ${u.id<10?'0'+u.id:u.id} (${u.s} ~ ${u.e})`; sel.appendChild(opt); }); }
        
        function renderBoard(targetId) {
            const track = document.getElementById('board-track'); track.innerHTML = '';
            const unit = plan.find(p => p.id === targetId); if(!unit) return;
            const s = new Date(new Date().getFullYear()+'-'+unit.s);
            const e = new Date(new Date().getFullYear()+'-'+unit.e);
            const days = Math.ceil((e-s)/86400000)+1;
            const todayStr = new Date().toISOString().split('T')[0];
            let todayEl = null;
            for(let i=0; i<days; i++) {
                const d = new Date(s); d.setDate(s.getDate()+i);
                const dStr = d.toISOString().split('T')[0];
                const tasks = JSON.parse(localStorage.getItem('tasks-'+dStr)||'[]');
                const meta = JSON.parse(localStorage.getItem('meta-'+dStr)||'{"mood":"âœ¨"}');
                const col = document.createElement('div');
                col.className = `board-card card p-8 flex flex-col ${dStr===todayStr?'today-highlight':''}`;
                col.innerHTML = `<div class="text-center mb-6"><div class="text-[9px] font-black opacity-30 uppercase">Day ${i+1}</div><div class="text-lg font-bold text-slate-600">${dStr.substring(5).replace('-','/')}</div><div class="text-2xl mt-2">${meta.mood}</div></div><div class="space-y-2 flex-1 overflow-y-auto">${tasks.map(t=>`<div class="p-3 rounded-xl text-[11px] font-bold shadow-sm ${t.done?'board-item-done':'bg-slate-50 text-slate-400'}">${t.txt}</div>`).join('')}</div>`;
                track.appendChild(col);
                if(dStr===todayStr) todayEl = col;
            }
            setTimeout(() => { if(todayEl) todayEl.scrollIntoView({ behavior: 'smooth', inline: 'center' }); else if(track.firstChild) track.firstChild.scrollIntoView({ behavior: 'smooth', inline: 'center' }); }, 100);
        }

		function renderYearly() {
            const container = document.getElementById('grid-container'); 
            container.innerHTML = '';
            const curId = getInfo(new Date()).id;
            
            plan.forEach(u => {
                const goal = localStorage.getItem('goal-' + u.id) || '';
                const div = document.createElement('div');
                
                // ä½¿ç”¨ç›¸å°å–®ä½ emï¼Œè®“å®ƒè·Ÿéš¨ html çš„ font-size ç¸®æ”¾
                // min-h ä¹Ÿè¦ç¨å¾®èª¿æ•´ï¼Œé¿å…æ”¾å¤§å¾Œå­—ç–Šåœ¨ä¸€èµ·
                div.className = `card p-4 min-h-[8em] flex flex-col ${u.id === curId ? 'bg-green-50 border-green-200 shadow-md scale-105 z-10' : ''}`;
                
                div.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <div class="text-[0.65rem] font-black opacity-30 uppercase tracking-tighter">Unit ${u.id}</div>
                        <div class="text-[0.6rem] text-slate-400 font-mono">${u.s}-${u.e}</div>
                    </div>
                    <textarea 
                        onblur="localStorage.setItem('goal-${u.id}', this.value)" 
                        placeholder="é»æ“Šè¼¸å…¥ç›®æ¨™..."
                        class="w-full bg-transparent outline-none text-[0.8rem] leading-relaxed text-slate-600 flex-1 resize-none placeholder:text-slate-200"
                    >${goal}</textarea>
                `;
                container.appendChild(div);
            });
        }

        function scrollBoard(dir) { document.getElementById('board-viewport').scrollBy({ left: dir * 310, behavior: 'smooth' }); }
        function exportData() { const d = {}; for(let i=0; i<localStorage.length; i++) { const k = localStorage.key(i); d[k] = localStorage.getItem(k); } const a = document.createElement('a'); a.href = URL.createObjectURL(new Blob([JSON.stringify(d)], {type: 'application/json'})); a.download = `life36_backup.json`; a.click(); }
        function importData() { const inp = document.createElement('input'); inp.type = 'file'; inp.onchange = e => { const r = new FileReader(); r.onload = ev => { const d = JSON.parse(ev.target.result); Object.keys(d).forEach(k => localStorage.setItem(k, d[k])); location.reload(); }; r.readAsText(e.target.files[0]); }; inp.click(); }
		
		// ä¿®æ”¹å­—é«”å¤§å°ä¸¦è¨˜æ†¶
		function changeFontSize(size) {
			// 1. è¨­å®šå…¨åŸŸè®Šæ•¸
			document.documentElement.style.setProperty('--base-font-size', size);

			// 2. å„²å­˜è¨­å®š
			localStorage.setItem('user-font-size', size);

			// 3. æ›´æ–°æŒ‰éˆ•è¦–è¦ºå¤–è§€ (ç§»é™¤æ‰€æœ‰ active å†åŠ ä¸Šç›®å‰çš„)
			['90%', '100%', '120%'].forEach(s => {
				const btn = document.getElementById('font-' + s.replace('%', ''));
				if (btn) btn.classList.remove('font-btn-active');
			});
			const activeBtn = document.getElementById('font-' + size.replace('%', ''));
			if (activeBtn) activeBtn.classList.add('font-btn-active');
		}

		// ç¢ºä¿ç¶²é æ‰“é–‹æ™‚è‡ªå‹•è®€å–èˆŠè¨­å®š (é€™æ®µæ”¾åœ¨ updateDaily() é™„è¿‘å³å¯)
		window.addEventListener('DOMContentLoaded', () => {
			const savedSize = localStorage.getItem('user-font-size') || '100%';
			changeFontSize(savedSize);
		});

        updateDaily();
    </script>
</body>
</html>